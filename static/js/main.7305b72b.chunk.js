(this.webpackJsonpshop=this.webpackJsonpshop||[]).push([[0],{43:function(e,t,c){},72:function(e,t,c){"use strict";c.r(t);var n=c(1),s=c(2),a=c.n(s),r=c(15),i=c.n(r),o=(c(43),c(11)),l=c.n(o),j=c(16),d=c(33),u=c(34),b=c(37),O=c(36),x=c(86),h=c(87),m=c(73),f=c(74),p=c(7),g=c(79),v=c(80),N=c(81),L=c(88),C=c(82),S=c(83),y=c(84),k=c(18),D=a.a.createContext(),F=function(e){var t=Object(s.useState)([]),c=Object(p.a)(t,2),a=c[0],r=c[1];return Object(n.jsx)(D.Provider,{value:[a,r],children:e.children})};var q=function(){var e=Object(s.useContext)(D),t=Object(p.a)(e,2),c=(t[0],t[1]),a=Object(k.useGoogleLogin)({onSuccess:function(e){console.log("Login Success: currentUser:",e.profileObj),function(e){var t=1e3*(e.tokenObj.expires_in||3300),c=function(){var n=Object(j.a)(l.a.mark((function n(){var s;return l.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,e.reloadAuthResponse();case 2:s=n.sent,t=1e3*(s.expires_in||3300),console.log("newAuthRes:",s),localStorage.setItem("authToken",s.id_token),setTimeout(c,t);case 7:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}();setTimeout(c,t)}(e),c([e.profileObj].splice())},onFailure:function(e){console.log("Login failed: res:",e)},clientId:"1036837016251-dvqb16dmo47obs19s1cpoo2kai7qg04t.apps.googleusercontent.com",isSignedIn:!0,accessType:"offline"}).signIn;return Object(n.jsxs)("button",{onClick:a,className:"button",children:[Object(n.jsx)("img",{src:"icons/google.svg",alt:"google login",className:"icon"}),Object(n.jsx)("span",{className:"buttonText",children:"Sign in"})]})};var A=function(){var e=Object(s.useContext)(D),t=Object(p.a)(e,2),c=(t[0],t[1]),a=Object(k.useGoogleLogout)({clientId:"1036837016251-dvqb16dmo47obs19s1cpoo2kai7qg04t.apps.googleusercontent.com",onLogoutSuccess:function(e){console.log("Logged out Success"),c([!1].splice())},onFailure:function(){console.log("Handle failure cases")}}).signOut;return Object(n.jsxs)("button",{onClick:a,className:"button",children:[Object(n.jsx)("img",{src:"icons/google.svg",alt:"google login",className:"icon"}),Object(n.jsx)("span",{className:"buttonText",children:"Sign out"})]})},E=c(12),w=c(75),P=c(76),I=c(77),T=c(78),H=function(e,t){return e.name<t.name?-1:e.name>t.name?1:0},W=a.a.createContext(),U=function(e){var t=Object(s.useState)([]),c=Object(p.a)(t,2),a=c[0],r=c[1];return Object(n.jsx)(W.Provider,{value:[a,r],children:e.children})},B=function(e,t,c,s){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"COLLAPSED",r="btn-icon-sm";return"COLLAPSED"!==a&&(r="btn-icon"),Object(n.jsxs)("span",{children:[Object(n.jsxs)("span",{children:[Object(n.jsx)("i",{className:"fa fa-plus ".concat(r),onClick:function(){return t(e.code)}}),Object(n.jsx)("span",{className:"px-1 pb-1 border-bottom",children:e.quantity}),Object(n.jsx)("i",{className:"fa fa-minus ".concat(r),onClick:function(){return c(e.code)}})]}),Object(n.jsx)("div",{className:"small btn-remove",onClick:function(){return s(e.code)},children:"Remove"})]})},R=function(e,t,c,s,a){return e.map((function(e,r){return function(e,t,c,s){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"COLLAPSED";switch(a){case"FULLWIDTH":return Object(n.jsxs)(m.a,{children:[Object(n.jsx)(f.a,{children:e.name}),Object(n.jsx)(f.a,{children:e.price}),Object(n.jsxs)(f.a,{children:[" ",B(e,t,c,s,"COLLAPSED")]}),Object(n.jsx)(f.a,{children:(parseFloat(e.price.replace("$",""))*e.quantity).toFixed(2)})]},"FULLWIDTH"+e.code);case"EXPANDED":return Object(n.jsx)(w.a,{className:"sidebar-cards",children:Object(n.jsxs)(P.a,{children:[Object(n.jsxs)(m.a,{children:[Object(n.jsx)(f.a,{children:Object(n.jsx)("img",{src:e.image,alt:e.image,className:"cart-img"})}),Object(n.jsxs)(f.a,{children:[Object(n.jsx)("div",{children:(parseFloat(e.price.replace("$",""))*e.quantity).toFixed(2)}),Object(n.jsx)("div",{children:e.name})]})]}),Object(n.jsx)(m.a,{children:Object(n.jsx)(f.a,{className:"text-center",children:B(e,t,c,s,a)})})]})},e.code);case"COLLAPSED":default:return Object(n.jsx)(w.a,{className:"sidebar-cards",children:Object(n.jsxs)(P.a,{children:[Object(n.jsx)(m.a,{children:Object(n.jsx)(f.a,{children:Object(n.jsx)("img",{src:e.image,alt:e.image,className:"cart-img"})})}),Object(n.jsx)(m.a,{children:Object(n.jsx)(f.a,{className:"text-center",children:B(e,t,c,s,a)})})]})},e.code)}}(e,t,c,s,a)}))},X=function(e,t){if(e.length>0)switch(t){case"EXPANDED":return Object(n.jsx)("div",{className:"cart-sidebar-summary",children:Object(n.jsx)(w.a,{children:Object(n.jsxs)(P.a,{children:[Object(n.jsxs)(I.a,{children:["Estimated subtotal: $",$(e).toFixed(2)]}),Object(n.jsx)(T.a,{className:"mt-2 btn btn-prime pill w-100",onClick:function(){return console.log("Checkout")},children:"View Cart"})]})})});case"COLLAPSED":default:return Object(n.jsx)("div",{className:"cart-sidebar-summary",children:Object(n.jsx)(w.a,{children:Object(n.jsxs)("div",{className:" d-flex flex-column align-items-center justify-content-center py-2",children:[Object(n.jsx)("i",{className:"fa fa-shopping-cart",onClick:function(){return V()}}),Object(n.jsx)("div",{children:Object(n.jsx)(M,{})}),Object(n.jsx)("div",{children:Object(n.jsx)(G,{})})]})})})}},$=function(e){return e.reduce((function(e,t){return e+parseFloat(t.price.replace("$","")*t.quantity)}),0)},M=function(){var e=Object(s.useContext)(W);return function(e){return e.reduce((function(e,t){return e+t.quantity}),0)}(Object(p.a)(e,1)[0])},G=function(){var e=Object(s.useContext)(W),t=Object(p.a)(e,1)[0];return Object(n.jsxs)("span",{children:["$",$(t).toFixed(2)]})},V=function(){document.querySelector(".cart-fullwidth").classList.toggle("d-none"),document.querySelector(".shop").classList.toggle("d-none")},_=function(){document.querySelector(".cart-sidebar-expanded").classList.toggle("d-none"),document.querySelector(".cart-sidebar-collapsed").classList.toggle("d-none")},z=function(e){var t,c,a,r=Object(s.useContext)(W),i=Object(p.a)(r,2),o=i[0],l=i[1],j=function(e){var t=o.find((function(t){return t.code===e}));t.quantity++,l([].concat(Object(E.a)(o.filter((function(t){return t.code!==e}))),[t]).sort((function(e,t){return H(e,t)})))},d=function(e){var t=o.find((function(t){return t.code===e}));t.quantity>0&&t.quantity--,l([].concat(Object(E.a)(o.filter((function(t){return t.code!==e}))),[t]).sort((function(e,t){return H(e,t)})))},u=function(e){l(o.filter((function(t){return t.code!==e}))),0===o.length&&(document.querySelector(".cart-sidebar-expanded").classList.add("d-none"),document.querySelector(".cart-sidebar-collapsed").classList.add("d-none"))};if("FULLWIDTH"===e.Format)return a=R(o,j,d,u,"FULLWIDTH"),Object(n.jsx)("div",{className:"cart-fullwidth d-none",children:Object(n.jsx)(w.a,{children:Object(n.jsxs)(P.a,{children:[Object(n.jsx)(I.a,{children:"Shopping Cart"}),a]})})});if("SIDEBAR"===e.Format){t=R(o,j,d,u,"COLLAPSED"),c=R(o,j,d,u,"EXPANDED");var b=X(o,"COLLAPSED"),O=X(o,"EXPANDED");return Object(n.jsxs)("div",{className:"sidebar",children:[Object(n.jsx)(w.a,{className:"cart-sidebar-collapsed d-none",children:Object(n.jsxs)(P.a,{children:[Object(n.jsx)(I.a,{children:Object(n.jsx)("i",{className:"fa fa-angle-left btn-round ml-auto",onClick:function(){return _()}})}),t,b]})}),Object(n.jsx)(w.a,{className:"cart-sidebar-expanded d-none",children:Object(n.jsxs)(P.a,{children:[Object(n.jsx)(I.a,{children:Object(n.jsxs)("div",{className:" d-flex align-items-center",children:["Shopping Cart",Object(n.jsx)("i",{className:"fa fa-times btn-round ml-auto",onClick:function(){return _()}})]})}),c,O]})})]})}},J=function(e){var t=Object(s.useState)(!1),c=Object(p.a)(t,2),a=c[0],r=c[1];return Object(n.jsx)("div",{className:"nav-sticky",children:Object(n.jsxs)(g.a,{color:"secondary",dark:!0,expand:"md",children:[Object(n.jsx)(v.a,{href:"/",children:"Meijer"}),Object(n.jsx)(N.a,{onClick:function(){return r(!a)}}),Object(n.jsx)(L.a,{isOpen:a,navbar:!0,children:Object(n.jsxs)(C.a,{className:"ml-auto",navbar:!0,children:[Object(n.jsxs)(S.a,{children:[Object(n.jsx)(q,{}),Object(n.jsx)(A,{})]}),Object(n.jsx)(S.a,{children:Object(n.jsxs)(y.a,{onClick:function(){return V()},children:[Object(n.jsx)("i",{className:"fa fa-shopping-cart"}),Object(n.jsx)("span",{className:"px-2",children:Object(n.jsx)(M,{})}),Object(n.jsx)("span",{children:Object(n.jsx)(G,{})})]})})]})})]})})},K=c(85),Q=function(e){var t=Object(s.useContext)(W),c=Object(p.a)(t,2),a=c[0],r=c[1];return Object(n.jsx)(f.a,{className:e.colWidth,children:Object(n.jsxs)(w.a,{className:"pill",children:[Object(n.jsx)(K.a,{top:!0,width:"100%",src:e.product.image,alt:"Card image cap",className:"pill"}),Object(n.jsxs)(P.a,{className:"text-center",children:[Object(n.jsx)(I.a,{tag:"h5",children:e.product.name}),Object(n.jsxs)("div",{children:["Price: ",e.product.price]}),Object(n.jsxs)("div",{className:"mb-3",children:["Code: ",e.product.code]}),Object(n.jsx)(T.a,{className:"w-100 pill btn-prime",onClick:function(){var t=a.find((function(t){return t.code===e.product.code})),c={code:e.product.code,image:e.product.image,name:e.product.name,price:e.product.price,quantity:t?t.quantity+1:1};r(t?[].concat(Object(E.a)(a.filter((function(e){return e.code!==t.code}))),[c]).sort((function(e,t){return H(e,t)})):function(e){return[].concat(Object(E.a)(e),[c]).sort((function(e,t){return H(e,t)}))}),0===a.length&&document.querySelector(".cart-sidebar-collapsed").classList.remove("d-none")},children:"Add to Cart"})]})]})},e.product.code)},Y=function(e){for(var t=e.products,c=[],s=null,a="col-12 col-md-".concat(3),r=0;r<t.length;r+=4)s=t.slice(r,r+4),c.push(Object(n.jsx)(m.a,{className:"mb-4",children:s.map((function(e){return Object(n.jsx)(Q,{product:e,colWidth:a},e.code)}))},r));return c},Z=c(35),ee=c.n(Z).a.create({baseURL:"https://meijerdigital.azurewebsites.net/api",headers:{"x-functions-key":"VockV3fu1c7vBvaG7A4oMALa9WIrPekx8jeH5HeBzuxir2X6NcAE5w=="}}),te=function(e){Object(b.a)(c,e);var t=Object(O.a)(c);function c(){var e;Object(d.a)(this,c);for(var n=arguments.length,s=new Array(n),a=0;a<n;a++)s[a]=arguments[a];return(e=t.call.apply(t,[this].concat(s))).state={products:[]},e.onLoadStore=Object(j.a)(l.a.mark((function t(){var c;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,ee.get("/products",{});case 2:c=t.sent,e.setState({products:c.data});case 4:case"end":return t.stop()}}),t)}))),e}return Object(u.a)(c,[{key:"componentDidMount",value:function(){this.onLoadStore()}},{key:"render",value:function(){return Object(n.jsx)(F,{children:Object(n.jsxs)(U,{children:[Object(n.jsx)(J,{}),Object(n.jsx)(x.a,{className:"position-relative",children:Object(n.jsx)(h.a,{fluid:!0,children:Object(n.jsx)(m.a,{children:Object(n.jsxs)(f.a,{className:"col-lg-11",children:[Object(n.jsx)("div",{className:"shop",children:Object(n.jsx)(Y,{products:this.state.products})}),Object(n.jsx)(z,{Format:"FULLWIDTH"})]})})})}),Object(n.jsx)(z,{Format:"SIDEBAR"})]})})}}]),c}(s.Component),ce=function(e){e&&e instanceof Function&&c.e(3).then(c.bind(null,89)).then((function(t){var c=t.getCLS,n=t.getFID,s=t.getFCP,a=t.getLCP,r=t.getTTFB;c(e),n(e),s(e),a(e),r(e)}))};c(71);i.a.render(Object(n.jsx)(a.a.StrictMode,{children:Object(n.jsx)(te,{})}),document.getElementById("root")),ce()}},[[72,1,2]]]);
//# sourceMappingURL=main.7305b72b.chunk.js.map